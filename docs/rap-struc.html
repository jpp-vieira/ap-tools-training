<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 RAP Structure | RAP Manual</title>
  <meta name="description" content="This is an instructional document serving to help analysts in MoJ with RAPping their publications." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="2 RAP Structure | RAP Manual" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an instructional document serving to help analysts in MoJ with RAPping their publications." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 RAP Structure | RAP Manual" />
  
  <meta name="twitter:description" content="This is an instructional document serving to help analysts in MoJ with RAPping their publications." />
  

<meta name="author" content="MoJ RAP Manual Working Group" />


<meta name="date" content="2021-08-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="git-flow.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MoJ RAP Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Intro to statistics publication RAP</a></li>
<li class="chapter" data-level="2" data-path="rap-struc.html"><a href="rap-struc.html"><i class="fa fa-check"></i><b>2</b> RAP Structure</a>
<ul>
<li class="chapter" data-level="2.1" data-path="rap-struc.html"><a href="rap-struc.html#use-one-repo-for-each-endpoint-in-your-process"><i class="fa fa-check"></i><b>2.1</b> Use one repo for each endpoint in your process</a></li>
<li class="chapter" data-level="2.2" data-path="rap-struc.html"><a href="rap-struc.html#common-structure-to-a-rap-repo"><i class="fa fa-check"></i><b>2.2</b> Common structure to a RAP repo</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="git-flow.html"><a href="git-flow.html"><i class="fa fa-check"></i><b>3</b> Version Control with Git Flow</a></li>
<li class="chapter" data-level="4" data-path="data-struc.html"><a href="data-struc.html"><i class="fa fa-check"></i><b>4</b> Data Structures</a></li>
<li class="chapter" data-level="5" data-path="generalisable-code.html"><a href="generalisable-code.html"><i class="fa fa-check"></i><b>5</b> Generalisable Code</a></li>
<li class="chapter" data-level="6" data-path="standards.html"><a href="standards.html"><i class="fa fa-check"></i><b>6</b> Develop your process against a defined set of standards</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">RAP Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rap_struc" class="section level1" number="2">
<h1><span class="header-section-number">2</span> RAP Structure</h1>
<p>In order to develop a pipeline like the one above, certain ways of structuring your RAP project can help.</p>
<div id="use-one-repo-for-each-endpoint-in-your-process" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Use one repo for each endpoint in your process</h2>
<p><img src="assets/ideal_process_map.png" /><!-- --></p>
<p>As in the diagram above, define a set of endpoints or outputs that your process will produce. This could include:</p>
<ul>
<li>Cleaned datasets for internal use</li>
<li>Publishable datasets (these may be the same as those above)</li>
<li>Publication outputs (Charts, Tables, Publication text)</li>
<li>Separate repos for other outputs (eg. MI packs, briefing packs, data visualisation tools)</li>
</ul>
<p>This makes it easier to use outputs for multiple purposes, rather than having to extract them from the middle of a larger process. It also allows other users who want to adapt your code or outputs to find the section of code that they need, without having to understand the full range of code.</p>
<p>In the diagram above, the aim of the first repository should be to render the data into a format that can be used to produce the broadest range of other outputs, which are then each created within their own repositories. You should also consider the point at which you want to include disclosure control in the process. For example, the first repo might create a full, unredacted dataset for internal use. You may they want to include a further stage which aggregates data to prevent small numbers being generated.</p>
</div>
<div id="common-structure-to-a-rap-repo" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Common structure to a RAP repo</h2>
<p>A RAP repository should have:</p>
<ul>
<li>An ‘inputs’ folder, for any inputs required by the process. This should only be used for things like lookup tables, templates etc. Datasets should be stored in s3.</li>
<li>An ‘outputs’ folder, for all outputs (eg. HTML, pdf, png) generated by the process.</li>
<li>A ‘processing’ folder containing R scripts or Rmd files used in the process.
<ul>
<li>A ‘functions’ folder within the processing folder, containing any functions created for the process.</li>
</ul></li>
</ul>
<p>A RAP repository should not have:</p>
<ul>
<li>Stored datasets</li>
<li>General functions. These should be stored in a package – ideally mojrap, or a process-specific package if necessary.</li>
</ul>
<p>Note that this structure only applies to a RAP repo that works as a series of scripts run manually. You may wish to create your repo as a package, in which case you should adopt the <a href="https://r-pkgs.org/package-structure-state.html">required structure for a package</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="git-flow.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-template.pdf", "bookdown-template.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

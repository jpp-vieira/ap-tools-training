<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Data Structures | RAP Manual</title>
  <meta name="description" content="This is an instructional document serving to help analysts in MoJ with RAPping their publications." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Data Structures | RAP Manual" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an instructional document serving to help analysts in MoJ with RAPping their publications." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Data Structures | RAP Manual" />
  
  <meta name="twitter:description" content="This is an instructional document serving to help analysts in MoJ with RAPping their publications." />
  

<meta name="author" content="MoJ RAP Manual Working Group" />


<meta name="date" content="2021-08-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="git-flow.html"/>
<link rel="next" href="generalisable-code.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MoJ RAP Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Intro to statistics publication RAP</a></li>
<li class="chapter" data-level="2" data-path="rap-struc.html"><a href="rap-struc.html"><i class="fa fa-check"></i><b>2</b> RAP Structure</a>
<ul>
<li class="chapter" data-level="2.1" data-path="rap-struc.html"><a href="rap-struc.html#use-one-repo-for-each-endpoint-in-your-process"><i class="fa fa-check"></i><b>2.1</b> Use one repo for each endpoint in your process</a></li>
<li class="chapter" data-level="2.2" data-path="rap-struc.html"><a href="rap-struc.html#common-structure-to-a-rap-repo"><i class="fa fa-check"></i><b>2.2</b> Common structure to a RAP repo</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="git-flow.html"><a href="git-flow.html"><i class="fa fa-check"></i><b>3</b> Version Control with Git Flow</a></li>
<li class="chapter" data-level="4" data-path="data-struc.html"><a href="data-struc.html"><i class="fa fa-check"></i><b>4</b> Data Structures</a></li>
<li class="chapter" data-level="5" data-path="generalisable-code.html"><a href="generalisable-code.html"><i class="fa fa-check"></i><b>5</b> Generalisable Code</a></li>
<li class="chapter" data-level="6" data-path="standards.html"><a href="standards.html"><i class="fa fa-check"></i><b>6</b> Develop your process against a defined set of standards</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">RAP Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data_struc" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Data Structures</h1>
<p>When developing RAP processes, you should ensure that your data adheres to tidy data formats at each stage. At its core this means adhering to three basic principles:</p>
<ol style="list-style-type: decimal">
<li>Each variable must have its own column</li>
<li>Each observation must have its own row</li>
<li>Each value must have its own cell</li>
</ol>
<p>In most cases, this will also mean only having one column of values, while every other column is used to define that value.</p>
<p>For example, if you were creating a dataset showing the prison population by age over time, it might look like this:</p>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">Pop_2017</th>
<th align="right">Pop_2018</th>
<th align="right">Pop_2020</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>15-17</td>
<td align="right">470</td>
<td align="right">3540</td>
<td align="right">70706</td>
</tr>
<tr class="even">
<td>18-20</td>
<td align="right">444</td>
<td align="right">3241</td>
<td align="right">68861</td>
</tr>
<tr class="odd">
<td>21+</td>
<td align="right">409</td>
<td align="right">3192</td>
<td align="right">69142</td>
</tr>
</tbody>
</table>
<p>This way of arranging a dataset is not tidy because each observation doesn’t have its own row. Each row contains an observation for 2017, 2018 and 2019. To convert this dataset to tidy data, you would rearrange it to the following:</p>
<table>
<thead>
<tr class="header">
<th align="left">Age</th>
<th align="left">Year</th>
<th align="left">Population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">15-17</td>
<td align="left">2017</td>
<td align="left">470</td>
</tr>
<tr class="even">
<td align="left">18-20</td>
<td align="left">2017</td>
<td align="left">3540</td>
</tr>
<tr class="odd">
<td align="left">21+</td>
<td align="left">2017</td>
<td align="left">70706</td>
</tr>
<tr class="even">
<td align="left">15-17</td>
<td align="left">2018</td>
<td align="left">444</td>
</tr>
<tr class="odd">
<td align="left">18-20</td>
<td align="left">2018</td>
<td align="left">3241</td>
</tr>
<tr class="even">
<td align="left">21+</td>
<td align="left">2018</td>
<td align="left">68861</td>
</tr>
<tr class="odd">
<td align="left">15-17</td>
<td align="left">2019</td>
<td align="left">409</td>
</tr>
<tr class="even">
<td align="left">18-20</td>
<td align="left">2019</td>
<td align="left">3192</td>
</tr>
<tr class="odd">
<td align="left">21+</td>
<td align="left">2019</td>
<td align="left">69142</td>
</tr>
</tbody>
</table>
<p>As you can see from the above example, turning your dataset into tidy data can be thought of as making it longer and thinner, with a single column of values.</p>
<p>There are three main advantages to following a tidy data structure within RAP:</p>
<ol style="list-style-type: decimal">
<li>Picking one consistent way of storing data allows you to learn how to use tools and packages within R and apply them across multiple datasets. It also enables you to use and develop functions and packages that will work across multiple datasets because you know how the data will be structured.</li>
<li>Commonly used tools like dplyr and ggplot2 are designed to work with tidy data.</li>
<li>R is designed to work with vectorised data. Placing variables in columns transforms your data into a set of vectors and so it will be easier to work with within R.</li>
</ol>
<p>For these reasons it is desirable to get your data into tidy format as soon as possible within your RAP process so you can start using some of these advantages as early in the process as possible.</p>
<p>Sometimes you may want to output data in an ‘untidy’ format, such as for outputs that are to be looked at by a user but not to be read by further code. Make sure to have these be the final output rather than datasets that are then manipulated by your code. All data wrangling should be done with tidy data.</p>
<p>For more information on tidy data, see <a href="https://r4ds.had.co.nz/tidy-data.html" class="uri">https://r4ds.had.co.nz/tidy-data.html</a></p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="git-flow.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="generalisable-code.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-template.pdf", "bookdown-template.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

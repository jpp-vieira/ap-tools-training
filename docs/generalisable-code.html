<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Generalisable Code | RAP Manual</title>
  <meta name="description" content="This is an instructional document serving to help analysts in MoJ with RAPping their publications." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Generalisable Code | RAP Manual" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an instructional document serving to help analysts in MoJ with RAPping their publications." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Generalisable Code | RAP Manual" />
  
  <meta name="twitter:description" content="This is an instructional document serving to help analysts in MoJ with RAPping their publications." />
  

<meta name="author" content="MoJ RAP Manual Working Group" />


<meta name="date" content="2021-08-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-struc.html"/>
<link rel="next" href="standards.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MoJ RAP Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Intro to statistics publication RAP</a></li>
<li class="chapter" data-level="2" data-path="rap-struc.html"><a href="rap-struc.html"><i class="fa fa-check"></i><b>2</b> RAP Structure</a>
<ul>
<li class="chapter" data-level="2.1" data-path="rap-struc.html"><a href="rap-struc.html#use-one-repo-for-each-endpoint-in-your-process"><i class="fa fa-check"></i><b>2.1</b> Use one repo for each endpoint in your process</a></li>
<li class="chapter" data-level="2.2" data-path="rap-struc.html"><a href="rap-struc.html#common-structure-to-a-rap-repo"><i class="fa fa-check"></i><b>2.2</b> Common structure to a RAP repo</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="git-flow.html"><a href="git-flow.html"><i class="fa fa-check"></i><b>3</b> Version Control with Git Flow</a></li>
<li class="chapter" data-level="4" data-path="data-struc.html"><a href="data-struc.html"><i class="fa fa-check"></i><b>4</b> Data Structures</a></li>
<li class="chapter" data-level="5" data-path="generalisable-code.html"><a href="generalisable-code.html"><i class="fa fa-check"></i><b>5</b> Generalisable Code</a></li>
<li class="chapter" data-level="6" data-path="standards.html"><a href="standards.html"><i class="fa fa-check"></i><b>6</b> Develop your process against a defined set of standards</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">RAP Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="generalisable_code" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Generalisable Code</h1>
<p>When writing code, you should consider how to make it as generalisable as possible. That is, you should write your code in a way that allows yourself and others to take what you’ve written and use it for several different purposes. In practice, this means writing code as functions within R.</p>
<p>A function is a set of commands that are bundled together so that they can all be repeated with a single line of code. A function will generally accept different inputs, or parameters, which allows it to be applied in different situations. Within R, functions can be grouped together in packages.</p>
<p>This means writing your code as much as possible to use these three methods (in reverse order of preference):</p>
<ol style="list-style-type: decimal">
<li>Custom functions</li>
<li>Custom packages</li>
<li>Multi-use packages (eg. mojrap)</li>
</ol>
<p>Code should use as few individual lines of processing as possible. You should design your process to make use of functions as much as possible and these functions should be designed to work on other datasets than those within your RAP process.</p>
<p>When creating functions, make them as generalisable as possible. This means not including any code within your function that is only applicable to your data and not hardcoding any dataset-specific variables. Any references to data should be set within the parameters of the function so that the function can work on other datasets. Code that is used to recode variables, for example, should refer to a lookup table rather than hard-coding the recodes within the function. This means that your function can be used in other contexts by simply referring to a new lookup table.</p>
<p>These functions should be built into packages, either custom packages for your particular RAP, or packages such as mojrap which work across multiple processes.</p>
<p><a href="https://github.com/moj-analytical-services/mojrap">Mojrap</a> is intended to serve as the repository for functions that can be used across publications within MOJ. It is also good practice to use the common packages used across tidy data to standardise your code, these could include:</p>
<ul>
<li>dplyr</li>
<li>tidyverse</li>
<li>openxlsx</li>
<li>ggplot2</li>
</ul>
<p>When writing your RAPped code in R, it is good practice to use package names with a double colon when calling functions from external packages. For example, when using dplyr’s filter function use dplyr::filter rather than just filter. This means whenever your code is reproduced, the packages required to run it are obvious from the functions used within the code. This also makes functions easier to code into packages if you do this later down the line.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-struc.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="standards.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-template.pdf", "bookdown-template.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
